{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tanstack-form",
  "type": "registry:ui",
  "title": "TanStack Form",
  "description": "A complete form management solution using TanStack Form with Zod validation, supporting all input types including arrays and nested objects.",
  "dependencies": [
    "@tanstack/react-form",
    "zod"
  ],
  "registryDependencies": [
    "label",
    "field"
  ],
  "files": [
    {
      "path": "components/ui/tanstack-form.tsx",
      "content": "\"use client\"\n\nimport type * as React from \"react\"\nimport { createFormHook, createFormHookContexts } from \"@tanstack/react-form\"\nimport type { z } from \"zod\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport {\n  Field,\n  FieldContent,\n  FieldDescription as FieldDescriptionComponent,\n  FieldError,\n  FieldLabel as FieldLabelComponent,\n} from \"@/components/ui/field\"\nimport { Input } from \"@/components/ui/input\"\nimport { Select } from \"@/components/ui/select\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Textarea } from \"@/components/ui/textarea\"\n\nexport const { fieldContext, useFieldContext, formContext, useFormContext } =\n  createFormHookContexts()\n\nexport function SubmitButton(props: React.ComponentProps<typeof Button>) {\n  const form = useFormContext()\n\n  return (\n    <form.Subscribe selector={(state) => state.isSubmitting}>\n      {(isSubmitting) => (\n        <Button type=\"submit\" disabled={isSubmitting} {...props} />\n      )}\n    </form.Subscribe>\n  )\n}\n\nfunction FormInput(props: React.ComponentProps<typeof Input>) {\n  const field = useFieldContext<string>()\n\n  return (\n    <Input\n      id={field.name}\n      name={field.name}\n      value={field.state.value}\n      placeholder={props.placeholder}\n      onBlur={field.handleBlur}\n      onChange={(e) => field.handleChange(e.target.value)}\n      {...props}\n    />\n  )\n}\n\nfunction FormSelect(props: React.ComponentProps<typeof Select>) {\n  const field = useFieldContext<string>()\n  return (\n    <Select\n      name={field.name}\n      value={field.state.value}\n      onValueChange={(value) => field.handleChange(value)}\n      {...props}\n    />\n  )\n}\n\nfunction FormTextarea(props: React.ComponentProps<typeof Textarea>) {\n  const field = useFieldContext<string>()\n  return (\n    <Textarea\n      id={field.name}\n      name={field.name}\n      value={field.state.value}\n      placeholder={props.placeholder}\n      onBlur={field.handleBlur}\n      onChange={(e) => field.handleChange(e.target.value)}\n      {...props}\n    />\n  )\n}\n\nfunction FormCheckbox(props: React.ComponentProps<typeof Checkbox>) {\n  const field = useFieldContext<boolean>()\n  return (\n    <Checkbox\n      id={field.name}\n      name={field.name}\n      checked={Boolean(field.state.value)}\n      onCheckedChange={(checked) => field.handleChange(Boolean(checked))}\n      {...props}\n    />\n  )\n}\n\nfunction FormSwitch(props: React.ComponentProps<typeof Switch>) {\n  const field = useFieldContext<boolean>()\n  return (\n    <Switch\n      id={field.name}\n      name={field.name}\n      checked={Boolean(field.state.value)}\n      onCheckedChange={(checked) => field.handleChange(Boolean(checked))}\n      {...props}\n    />\n  )\n}\n\nfunction FieldField(props: React.ComponentProps<typeof Field>) {\n  const field = useFieldContext<string>()\n  const isInvalid = field.state.meta.isTouched && !field.state.meta.isValid\n  return <Field {...props} data-invalid={isInvalid} />\n}\n\nexport const { useAppForm } = createFormHook({\n  fieldComponents: {\n    Input: FormInput,\n    Select: FormSelect,\n    Textarea: FormTextarea,\n    Checkbox: FormCheckbox,\n    Switch: FormSwitch,\n    Label: FieldLabel,\n    Description: FieldDescription,\n    Message: FieldMessage,\n    Field: FieldField,\n    Content: FieldContent,\n  },\n  formComponents: {\n    SubmitButton: SubmitButton,\n  },\n  fieldContext,\n  formContext,\n})\n\n/**\n * Hook to create a TanStack form with Zod validation\n * Returns a type-safe FormApi with inferred form data type\n *\n * @example\n * const form = useForm({\n *   schema: z.object({ email: z.string().email() }),\n *   defaultValues: { email: '' },\n *   onSubmit: async (values) => console.log(values),\n * })\n * // form is typed as FormApi<{ email: string }>\n */\nexport function useForm<TSchema extends z.ZodType>({\n  schema,\n  defaultValues,\n  onSubmit,\n  validationMode = \"onBlur\",\n}: {\n  schema: TSchema\n  defaultValues: z.infer<TSchema>\n  onSubmit: (values: z.infer<TSchema>) => void | Promise<void>\n  validationMode?: \"onChange\" | \"onBlur\" | \"onSubmit\"\n}) {\n  return useAppForm({\n    defaultValues,\n    validators: {\n      [validationMode]: schema,\n    },\n    onSubmit: async ({ value }) => {\n      await onSubmit(value as z.infer<TSchema>)\n    },\n  })\n}\n\n/**\n * Form wrapper component that provides form context and handles submission\n *\n * @example\n * const form = useForm({\n *   schema: z.object({ email: z.string().email() }),\n *   defaultValues: { email: '' },\n *   onSubmit: async (values) => console.log(values),\n * })\n *\n * <form onSubmit={(e) => { e.preventDefault(); form.handleSubmit() }}>\n *   <form.AppField name=\"email\">\n *     {(field) => (\n *       <Field>\n *         <FormLabel>Email</FormLabel>\n *         <FieldContent>\n *           <field.Input type=\"email\" placeholder=\"you@example.com\" />\n *           <FormMessage />\n *         </FieldContent>\n *       </Field>\n *     )}\n *   </form.AppField>\n *   <form.AppForm>\n *     <form.SubmitButton>Submit</form.SubmitButton>\n *   </form.AppForm>\n * </form>\n */\nexport function Form<TSchema extends z.ZodType>({\n  children,\n  form,\n  ...props\n}: {\n  children: React.ReactNode\n  form: ReturnType<typeof useForm<TSchema>>\n} & Omit<React.ComponentProps<\"form\">, \"onSubmit\">) {\n  return (\n    <form.AppForm>\n      <form\n        onSubmit={(e) => {\n          e.preventDefault()\n          e.stopPropagation()\n          void form.handleSubmit()\n        }}\n        {...props}\n      >\n        {children}\n      </form>\n    </form.AppForm>\n  )\n}\n\nfunction FieldLabel(props: React.ComponentProps<typeof FieldLabelComponent>) {\n  const field = useFieldContext<string>()\n\n  return <FieldLabelComponent htmlFor={field.name} {...props} />\n}\n\n/**\n * Description text for form field - uses FieldDescription with TanStack Form integration\n */\nfunction FieldDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof FieldDescriptionComponent>) {\n  const field = useFieldContext<string>()\n\n  return (\n    <FieldDescriptionComponent\n      id={`${field.name}-form-item-description`}\n      className={className}\n      {...props}\n    />\n  )\n}\n\nfunction FieldMessage(props: React.ComponentProps<typeof FieldError>) {\n  const field = useFieldContext<string>()\n  const isInvalid = field.state.meta.isTouched && !field.state.meta.isValid\n\n  return (\n    <>\n      {isInvalid ? (\n        <FieldError {...props} errors={field.state.meta.errors} />\n      ) : null}\n    </>\n  )\n}\n",
      "type": "registry:ui"
    }
  ]
}